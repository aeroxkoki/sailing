# -*- coding: utf-8 -*-
"""
ã‚»ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥åˆ†æã‚·ã‚¹ãƒ†ãƒ  - ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ãŸã‚ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã§ã™ã€‚
"""

import os
import sys
import streamlit as st

# ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¦æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
st.set_page_config(
    page_title="ã‚»ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥åˆ†æã‚·ã‚¹ãƒ†ãƒ  - ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ",
    page_icon="ğŸŒŠ",
    layout="wide"
)

st.title("ã‚»ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥åˆ†æã‚·ã‚¹ãƒ†ãƒ ")
st.info("æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã¦ã„ã¾ã™...")

# ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨å®Ÿè¡Œãƒ‘ã‚¹ã‚’å–å¾—
current_dir = os.path.dirname(os.path.abspath(__file__))
main_app_path = os.path.join(current_dir, "app_v5.py")

# app_v5.pyã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨å®Ÿè¡Œ
sys.path.insert(0, os.path.abspath(os.path.join(current_dir, '..')))

try:
    # åˆ¥ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦app_v5.pyã‚’èµ·å‹•ï¼ˆStreamlitç’°å¢ƒã§ã¯ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯é›£ã—ã„ï¼‰
    st.info(f"æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™: {main_app_path}")
    st.write("ã“ã®ãƒšãƒ¼ã‚¸ã‚’é–‰ã˜ã¦ã€æ–°ã—ãé–‹ã„ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚")
    
    # èµ·å‹•ã‚³ãƒãƒ³ãƒ‰ã‚’è¡¨ç¤º
    st.code(f"streamlit run {main_app_path}", language="bash")
    
    # ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èµ·å‹•
    if st.button("æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èµ·å‹•", type="primary"):
        import subprocess
        try:
            subprocess.Popen(["streamlit", "run", main_app_path])
            st.success("æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã¾ã—ãŸ")
        except Exception as e:
            st.error(f"èµ·å‹•ã‚¨ãƒ©ãƒ¼: {e}")

except Exception as e:
    st.error(f"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
    st.error("ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:")
    st.code(f"streamlit run {main_app_path}", language="bash")
