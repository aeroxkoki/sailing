2025-03-28 19:31:29,878 - __main__ - INFO - === エッジケーステスト開始 ===
2025-03-28 19:31:29,878 - __main__ - INFO - 1. 低密度データセットのテスト
2025-03-28 19:31:29,884 - __main__ - INFO - === StrategyDetector テスト: 低密度 ===
2025-03-28 19:31:29,886 - __main__ - DEBUG - 風向シフト検出をテスト開始
2025-03-28 19:31:29,887 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:31:29,914 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 285, in test_strategy_detector_with_dataset
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:31:29,914 - __main__ - DEBUG - 最適タック検出をテスト開始
2025-03-28 19:31:29,915 - __main__ - INFO - 最適タック検出 成功: 0個のタックポイントを検出
2025-03-28 19:31:29,915 - __main__ - INFO - パフォーマンス: 実行時間 0.03秒, データサイズ 10行
2025-03-28 19:31:29,915 - __main__ - INFO - メモリ使用量: 144.23 MB
2025-03-28 19:31:29,915 - __main__ - INFO - === AnomalyDetector テスト: 低密度 ===
2025-03-28 19:31:29,915 - __main__ - DEBUG - 異常値検出をテスト開始
2025-03-28 19:31:29,918 - __main__ - ERROR - 異常値検出 失敗: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:31:29,926 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 340, in test_anomaly_detector_with_dataset
    detected_df = anomaly_detector.detect_anomalies(df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:31:29,926 - __main__ - INFO - === StrategyDetectorエラー詳細分析 ===
2025-03-28 19:31:29,926 - __main__ - DEBUG - StrategyDetector設定: {'wind_shift_prediction_horizon': 1800, 'wind_shift_confidence_threshold': 0.6, 'min_propagation_distance': 100, 'tack_delay_penalty': 0.2, 'max_propagation_lookahead': 3600, 'min_tack_confidence': 0.7, 'tack_speed_penalty': 0.9, 'layline_prediction_buffer': 1.2}
2025-03-28 19:31:29,927 - __main__ - DEBUG - _detect_propagation_based_shifts メソッドをデバッグ
2025-03-28 19:31:29,927 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:31:29,927 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 471, in analyze_strategy_detector_error
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:31:29,927 - __main__ - INFO - 2. 大規模データセットのテスト
2025-03-28 19:31:30,061 - __main__ - INFO - === StrategyDetector テスト: 大規模 ===
2025-03-28 19:31:32,560 - __main__ - DEBUG - 風向シフト検出をテスト開始
2025-03-28 19:31:32,560 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:31:32,561 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 285, in test_strategy_detector_with_dataset
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:31:32,561 - __main__ - DEBUG - 最適タック検出をテスト開始
2025-03-28 19:31:32,562 - __main__ - INFO - 最適タック検出 成功: 0個のタックポイントを検出
2025-03-28 19:31:32,562 - __main__ - INFO - パフォーマンス: 実行時間 0.00秒, データサイズ 10000行
2025-03-28 19:31:32,563 - __main__ - INFO - メモリ使用量: 153.52 MB
2025-03-28 19:31:32,567 - __main__ - INFO - === AnomalyDetector テスト: 大規模 ===
2025-03-28 19:31:32,568 - __main__ - DEBUG - 異常値検出をテスト開始
2025-03-28 19:31:32,570 - __main__ - ERROR - 異常値検出 失敗: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:31:32,570 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 340, in test_anomaly_detector_with_dataset
    detected_df = anomaly_detector.detect_anomalies(df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:31:32,570 - __main__ - INFO - === AnomalyDetectorエラー詳細分析 ===
2025-03-28 19:31:32,570 - __main__ - DEBUG - AnomalyDetector検出設定: {'z_score_threshold': 3.0, 'mad_threshold': 3.5, 'isolation_forest_threshold': 0.9, 'lof_threshold': 1.5, 'speed_multiplier': 3.0, 'acceleration_threshold': 5.0, 'distance_threshold': 100, 'time_gap_threshold': 30}
2025-03-28 19:31:32,571 - __main__ - DEBUG - AnomalyDetector補間設定: {'default_method': 'linear', 'window_size': 5, 'smooth_factor': 0.5, 'extrapolation_method': 'nearest'}
2025-03-28 19:31:32,571 - __main__ - INFO - エラーが発生するデータサイズの閾値を特定しています...
2025-03-28 19:31:32,572 - __main__ - DEBUG - データサイズ 2 でテスト
2025-03-28 19:31:32,573 - __main__ - ERROR - サイズ 2 でエラー発生: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:31:32,574 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 509, in analyze_anomaly_detector_error
    detected_df = anomaly_detector.detect_anomalies(test_df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:31:32,574 - __main__ - INFO - エラー閾値を特定: サイズ 2
2025-03-28 19:31:32,574 - __main__ - ERROR - エラー分析中に例外が発生: 'AnomalyDetector' object has no attribute '_detect_by_speed'
2025-03-28 19:31:32,574 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 520, in analyze_anomaly_detector_error
    original_method = anomaly_detector._detect_by_speed
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_speed'

2025-03-28 19:31:32,574 - __main__ - INFO - 3. 不均一データセットのテスト
2025-03-28 19:32:11,516 - __main__ - INFO - === エッジケーステスト開始 ===
2025-03-28 19:32:11,517 - __main__ - INFO - 1. 低密度データセットのテスト
2025-03-28 19:32:11,525 - __main__ - INFO - === StrategyDetector テスト: 低密度 ===
2025-03-28 19:32:11,532 - __main__ - DEBUG - 風向シフト検出をテスト開始
2025-03-28 19:32:11,532 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:32:11,582 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 285, in test_strategy_detector_with_dataset
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:32:11,583 - __main__ - DEBUG - 最適タック検出をテスト開始
2025-03-28 19:32:11,583 - __main__ - INFO - 最適タック検出 成功: 0個のタックポイントを検出
2025-03-28 19:32:11,584 - __main__ - INFO - パフォーマンス: 実行時間 0.05秒, データサイズ 10行
2025-03-28 19:32:11,584 - __main__ - INFO - メモリ使用量: 142.77 MB
2025-03-28 19:32:11,585 - __main__ - INFO - === AnomalyDetector テスト: 低密度 ===
2025-03-28 19:32:11,585 - __main__ - DEBUG - 異常値検出をテスト開始
2025-03-28 19:32:11,591 - __main__ - ERROR - 異常値検出 失敗: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:32:11,617 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 340, in test_anomaly_detector_with_dataset
    detected_df = anomaly_detector.detect_anomalies(df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:32:11,617 - __main__ - INFO - === StrategyDetectorエラー詳細分析 ===
2025-03-28 19:32:11,618 - __main__ - DEBUG - StrategyDetector設定: {'wind_shift_prediction_horizon': 1800, 'wind_shift_confidence_threshold': 0.6, 'min_propagation_distance': 100, 'tack_delay_penalty': 0.2, 'max_propagation_lookahead': 3600, 'min_tack_confidence': 0.7, 'tack_speed_penalty': 0.9, 'layline_prediction_buffer': 1.2}
2025-03-28 19:32:11,618 - __main__ - DEBUG - _detect_propagation_based_shifts メソッドをデバッグ
2025-03-28 19:32:11,618 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:32:11,619 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 471, in analyze_strategy_detector_error
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:32:11,619 - __main__ - INFO - 2. 大規模データセットのテスト
2025-03-28 19:32:11,848 - __main__ - INFO - === StrategyDetector テスト: 大規模 ===
2025-03-28 19:32:15,159 - __main__ - DEBUG - 風向シフト検出をテスト開始
2025-03-28 19:32:15,160 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:32:15,160 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 285, in test_strategy_detector_with_dataset
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:32:15,161 - __main__ - DEBUG - 最適タック検出をテスト開始
2025-03-28 19:32:15,161 - __main__ - INFO - 最適タック検出 成功: 0個のタックポイントを検出
2025-03-28 19:32:15,161 - __main__ - INFO - パフォーマンス: 実行時間 0.00秒, データサイズ 10000行
2025-03-28 19:32:15,161 - __main__ - INFO - メモリ使用量: 152.21 MB
2025-03-28 19:32:15,168 - __main__ - INFO - === AnomalyDetector テスト: 大規模 ===
2025-03-28 19:32:15,169 - __main__ - DEBUG - 異常値検出をテスト開始
2025-03-28 19:32:15,171 - __main__ - ERROR - 異常値検出 失敗: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:32:15,171 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 340, in test_anomaly_detector_with_dataset
    detected_df = anomaly_detector.detect_anomalies(df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:32:15,171 - __main__ - INFO - === AnomalyDetectorエラー詳細分析 ===
2025-03-28 19:32:15,172 - __main__ - DEBUG - AnomalyDetector検出設定: {'z_score_threshold': 3.0, 'mad_threshold': 3.5, 'isolation_forest_threshold': 0.9, 'lof_threshold': 1.5, 'speed_multiplier': 3.0, 'acceleration_threshold': 5.0, 'distance_threshold': 100, 'time_gap_threshold': 30}
2025-03-28 19:32:15,172 - __main__ - DEBUG - AnomalyDetector補間設定: {'default_method': 'linear', 'window_size': 5, 'smooth_factor': 0.5, 'extrapolation_method': 'nearest'}
2025-03-28 19:32:15,172 - __main__ - INFO - エラーが発生するデータサイズの閾値を特定しています...
2025-03-28 19:32:15,173 - __main__ - DEBUG - データサイズ 2 でテスト
2025-03-28 19:32:15,175 - __main__ - ERROR - サイズ 2 でエラー発生: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:32:15,175 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 509, in analyze_anomaly_detector_error
    detected_df = anomaly_detector.detect_anomalies(test_df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:32:15,175 - __main__ - INFO - エラー閾値を特定: サイズ 2
2025-03-28 19:32:15,176 - __main__ - ERROR - エラー分析中に例外が発生: 'AnomalyDetector' object has no attribute '_detect_by_speed'
2025-03-28 19:32:15,176 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 520, in analyze_anomaly_detector_error
    original_method = anomaly_detector._detect_by_speed
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_speed'

2025-03-28 19:32:15,176 - __main__ - INFO - 3. 不均一データセットのテスト
2025-03-28 19:32:30,140 - __main__ - INFO - === エッジケーステスト開始 ===
2025-03-28 19:32:30,140 - __main__ - INFO - 1. 低密度データセットのテスト
2025-03-28 19:32:30,148 - __main__ - INFO - === StrategyDetector テスト: 低密度 ===
2025-03-28 19:32:30,156 - __main__ - DEBUG - 風向シフト検出をテスト開始
2025-03-28 19:32:30,157 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:32:30,181 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 285, in test_strategy_detector_with_dataset
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:32:30,181 - __main__ - DEBUG - 最適タック検出をテスト開始
2025-03-28 19:32:30,181 - __main__ - INFO - 最適タック検出 成功: 0個のタックポイントを検出
2025-03-28 19:32:30,181 - __main__ - INFO - パフォーマンス: 実行時間 0.03秒, データサイズ 10行
2025-03-28 19:32:30,182 - __main__ - INFO - メモリ使用量: 144.09 MB
2025-03-28 19:32:30,182 - __main__ - INFO - === AnomalyDetector テスト: 低密度 ===
2025-03-28 19:32:30,182 - __main__ - DEBUG - 異常値検出をテスト開始
2025-03-28 19:32:30,185 - __main__ - ERROR - 異常値検出 失敗: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:32:30,205 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 340, in test_anomaly_detector_with_dataset
    detected_df = anomaly_detector.detect_anomalies(df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:32:30,206 - __main__ - INFO - === StrategyDetectorエラー詳細分析 ===
2025-03-28 19:32:30,206 - __main__ - DEBUG - StrategyDetector設定: {'wind_shift_prediction_horizon': 1800, 'wind_shift_confidence_threshold': 0.6, 'min_propagation_distance': 100, 'tack_delay_penalty': 0.2, 'max_propagation_lookahead': 3600, 'min_tack_confidence': 0.7, 'tack_speed_penalty': 0.9, 'layline_prediction_buffer': 1.2}
2025-03-28 19:32:30,207 - __main__ - DEBUG - _detect_propagation_based_shifts メソッドをデバッグ
2025-03-28 19:32:30,207 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:32:30,207 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 471, in analyze_strategy_detector_error
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:32:30,208 - __main__ - INFO - 2. 大規模データセットのテスト
2025-03-28 19:32:30,416 - __main__ - INFO - === StrategyDetector テスト: 大規模 ===
2025-03-28 19:32:33,730 - __main__ - DEBUG - 風向シフト検出をテスト開始
2025-03-28 19:32:33,730 - __main__ - ERROR - 風向シフト検出 失敗: unhashable type: 'dict'
2025-03-28 19:32:33,731 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 285, in test_strategy_detector_with_dataset
    wind_shifts = strategy_detector.detect_wind_shifts_with_propagation(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/strategy_detector_with_propagation.py", line 78, in detect_wind_shifts_with_propagation
    base_shift_points = super().detect_wind_shifts(course_data, wind_field)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/strategy/detector.py", line 111, in detect_wind_shifts
    current_wind = self._get_wind_at_position(lat, lon, target_time, wind_field)
TypeError: unhashable type: 'dict'

2025-03-28 19:32:33,731 - __main__ - DEBUG - 最適タック検出をテスト開始
2025-03-28 19:32:33,731 - __main__ - INFO - 最適タック検出 成功: 0個のタックポイントを検出
2025-03-28 19:32:33,731 - __main__ - INFO - パフォーマンス: 実行時間 0.00秒, データサイズ 10000行
2025-03-28 19:32:33,732 - __main__ - INFO - メモリ使用量: 153.38 MB
2025-03-28 19:32:33,738 - __main__ - INFO - === AnomalyDetector テスト: 大規模 ===
2025-03-28 19:32:33,739 - __main__ - DEBUG - 異常値検出をテスト開始
2025-03-28 19:32:33,740 - __main__ - ERROR - 異常値検出 失敗: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:32:33,741 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 340, in test_anomaly_detector_with_dataset
    detected_df = anomaly_detector.detect_anomalies(df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:32:33,741 - __main__ - INFO - === AnomalyDetectorエラー詳細分析 ===
2025-03-28 19:32:33,741 - __main__ - DEBUG - AnomalyDetector検出設定: {'z_score_threshold': 3.0, 'mad_threshold': 3.5, 'isolation_forest_threshold': 0.9, 'lof_threshold': 1.5, 'speed_multiplier': 3.0, 'acceleration_threshold': 5.0, 'distance_threshold': 100, 'time_gap_threshold': 30}
2025-03-28 19:32:33,742 - __main__ - DEBUG - AnomalyDetector補間設定: {'default_method': 'linear', 'window_size': 5, 'smooth_factor': 0.5, 'extrapolation_method': 'nearest'}
2025-03-28 19:32:33,742 - __main__ - INFO - エラーが発生するデータサイズの閾値を特定しています...
2025-03-28 19:32:33,743 - __main__ - DEBUG - データサイズ 2 でテスト
2025-03-28 19:32:33,746 - __main__ - ERROR - サイズ 2 でエラー発生: 'AnomalyDetector' object has no attribute '_detect_by_z_score'
2025-03-28 19:32:33,747 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 509, in analyze_anomaly_detector_error
    detected_df = anomaly_detector.detect_anomalies(test_df, methods)
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/sailing_data_processor/anomaly_detector.py", line 91, in detect_anomalies
    anomalies, scores = self._detect_by_z_score(
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_z_score'

2025-03-28 19:32:33,747 - __main__ - INFO - エラー閾値を特定: サイズ 2
2025-03-28 19:32:33,748 - __main__ - ERROR - エラー分析中に例外が発生: 'AnomalyDetector' object has no attribute '_detect_by_speed'
2025-03-28 19:32:33,748 - __main__ - DEBUG - Traceback (most recent call last):
  File "/Users/koki_air/Documents/GitHub/sailing-strategy-analyzer/edge_case_tests.py", line 520, in analyze_anomaly_detector_error
    original_method = anomaly_detector._detect_by_speed
AttributeError: 'AnomalyDetector' object has no attribute '_detect_by_speed'

2025-03-28 19:32:33,748 - __main__ - INFO - 3. 不均一データセットのテスト
