# セーリング戦略分析システム - デプロイチェックリスト

## Streamlit Cloudへのデプロイ前チェックリスト

### コード構成

- [ ] `streamlit_app.py` がリポジトリのルートに存在する
- [ ] `ui/app_v5.py` が最新の状態である
- [ ] インポートパスが適切に設定されている (相対パスではなく絶対パス)
- [ ] 環境変数の設定・参照が正しい

### 依存関係

- [ ] `requirements.txt` が最新状態
- [ ] バージョン指定が明示的であり、依存関係の競合がない
- [ ] 不要な開発用パッケージがリストから除外されている
- [ ] 全ての必要なパッケージが含まれている

### 設定

- [ ] `.streamlit/config.toml` が正しく設定されている
- [ ] インポートパスが適切に設定されている
- [ ] 環境変数のデフォルト値が設定されている

### クラウド対応

- [ ] ローカルファイルシステムへの書き込みに依存していない
- [ ] ブラウザストレージを使用してデータを保存している
- [ ] クラウド環境でのセキュリティ考慮事項に対応している
- [ ] 許容されるファイルサイズ制限内で動作する

### パフォーマンス

- [ ] 大規模データセット処理に対するメモリ使用量が最適化されている
- [ ] キャッシュ機能（`@st.cache_data`など）を適切に使用している
- [ ] 不要な計算が繰り返されないようになっている

### ユーザーエクスペリエンス

- [ ] エラーメッセージが明確で役立つ内容になっている
- [ ] ヘルプコンテンツが十分に整備されている
- [ ] ローディングインジケーターが長時間の処理に表示される
- [ ] モバイルデバイスでの表示が検証されている

### セキュリティ

- [ ] 機密情報（APIキーなど）がコードに直接記述されていない
- [ ] ユーザーがアップロードしたデータに対する適切な検証が行われている
- [ ] クロスサイトスクリプティング(XSS)などの脆弱性に対応している

## デプロイ手順

1. リポジトリを最新の状態にプッシュする
   ```bash
   git add .
   git commit -m "準備: Streamlit Cloud デプロイ用の最終調整"
   git push origin main
   ```

2. Streamlit Cloudにログイン
   - https://streamlit.io/cloud にアクセス
   - GitHubアカウントでログイン

3. 新しいアプリを作成
   - 「New app」ボタンをクリック
   - リポジトリを選択: `your-username/sailing-strategy-analyzer`
   - ブランチ: `main`
   - メインファイル: `streamlit_app.py`
   - アプリ名とPython版数を設定

4. デプロイボタンをクリック
   - デプロイログを確認
   - エラーがあれば修正

5. デプロイしたアプリをテスト
   - 基本機能の動作確認
   - パフォーマンスチェック
   - デザインとレイアウトの確認

## デプロイ後のチェックリスト

### 動作確認

- [ ] アプリケーションが正常に起動する
- [ ] すべての主要機能が動作する
- [ ] データのインポート・エクスポートが機能する
- [ ] 動作が許容可能な速度で実行される

### モニタリング設定

- [ ] アプリケーションの使用状況を監視する計画がある
- [ ] エラー通知の設定がある
- [ ] パフォーマンス問題を検出する方法がある

### ドキュメント更新

- [ ] デプロイされたアプリのURLがドキュメントに記載されている
- [ ] 使用方法ガイドが最新
- [ ] 既知の制限事項が文書化されている

### バックアップと復旧

- [ ] コードのバックアップ戦略がある
- [ ] ユーザーデータのエクスポート手順が文書化されている
- [ ] 障害発生時の対応手順が決まっている

## トラブルシューティング

### 一般的なデプロイ問題

1. **依存関係のエラー**
   - ログを確認し、具体的なパッケージやバージョンの問題を特定
   - `requirements.txt` を修正して再デプロイ

2. **メモリ制限の問題**
   - データ処理を最適化
   - キャッシュを効果的に使用
   - 必要に応じてデータのダウンサンプリングを検討

3. **ファイルシステムの問題**
   - ローカルファイル参照をブラウザストレージに変更
   - 一時ファイルの使用に切り替え

4. **セッション管理の問題**
   - `st.session_state` の使用方法を見直し
   - ブラウザ側の保存メカニズムを検討

## 連絡先とサポート

デプロイに関する問題や質問がある場合は、以下にお問い合わせください：

- GitHubリポジトリのIssues: https://github.com/your-username/sailing-strategy-analyzer/issues
- プロジェクト管理者のメール: [メールアドレス]
