# データ検証フィードバックシステムユーザーガイド

このドキュメントでは、セーリング戦略分析システムのデータ検証フィードバック機能の使い方について説明します。データの品質問題を視覚的に確認し、効率的に修正するための機能を提供します。

## 1. 概要

データ検証フィードバックシステムは、GPSデータの品質を評価し、問題を検出して修正するためのツールです。主な機能は以下の通りです：

- データ品質の総合的な評価とスコア表示
- 問題箇所の視覚的ハイライト表示
- 自動修正提案の生成と適用
- 大規模データセットの効率的な処理
- 詳細な品質レポートの生成とエクスポート

## 2. 検証ダッシュボードの使い方

### 2.1 ダッシュボードの起動

データをインポートした後、「データ検証」タブを選択してダッシュボードを表示します。

### 2.2 概要タブ

概要タブでは、データの品質の全体像を確認できます。

![概要タブ](../images/validation_overview.png)

- **品質スコア**: データ品質の総合スコアを100点満点で表示します。
- **カテゴリ別スコア**: 完全性、正確性、一貫性のスコアをグラフで表示します。
- **問題分布**: 問題タイプの分布を円グラフで表示します。
- **空間・時間的分布**: 問題の空間的・時間的な分布を地図とタイムラインで表示します。

### 2.3 詳細分析タブ

詳細分析タブでは、問題をフィルタリングして詳しく確認できます。

- **問題タイプ/重要度フィルター**: 表示する問題タイプと重要度を選択できます。
- **問題リスト**: フィルタリングされた問題の一覧を表示します。
- **問題詳細**: 選択した問題の詳細な情報を表示します。
- **拡張分析**: 時間的・空間的な品質メトリクスの詳細な分析を表示します。

### 2.4 問題箇所タブ

問題箇所タブでは、検出された問題のあるデータレコードを確認できます。

- **問題タイプ選択**: 表示する問題タイプを選択できます。
- **問題レコード**: 問題のあるレコードを表形式で表示します。
- **空間可視化**: 位置データがある場合、問題箇所を地図上に表示します。

### 2.5 修正提案タブ

修正提案タブでは、自動生成された修正提案を確認し、適用できます。

- **重要度別タブ**: エラー、警告、情報別に提案を分類して表示します。
- **提案詳細**: 選択した提案の詳細情報を表示します。
- **適用ボタン**: 選択した提案を適用します。

### 2.6 レポートタブ

レポートタブでは、検証結果の詳細レポートを確認し、エクスポートできます。

- **品質概要**: データ品質の概要と品質スコアを表示します。
- **問題リスト**: 検出された問題の詳細リストを表示します。
- **カテゴリ別統計**: カテゴリ別の問題統計を表示します。
- **修正提案概要**: 修正提案の概要を表示します。
- **エクスポート**: レポートを各種形式でエクスポートできます。

## 3. データ修正機能の使い方

### 3.1 自動修正

「修正提案」タブで自動生成された修正提案を確認し、適用することができます。

1. 修正提案リストから適用したい提案を選択します。
2. 提案の詳細を確認します。
3. 「この提案を適用」ボタンをクリックして修正を適用します。
4. 修正が適用されると、検証が自動的に再実行され、結果が更新されます。

### 3.2 修正前後の比較

修正を適用した後、修正前後の値を比較して確認することができます。

1. 修正適用後に表示される「修正詳細」を展開します。
2. 影響を受けたレコードと変更内容を確認します。

### 3.3 大規模データの処理

大規模なデータセット（10,000行以上）を扱う場合、システムは自動的にサンプリングを行い、効率的に処理します。

- 処理状況はプログレスバーで表示されます。
- 最適化方法は自動的に選択されますが、時系列データと一般データで異なるアプローチが使用されます。
- 最適化されたデータは自動的にキャッシュされ、再処理の必要がなくなります。

## 4. よくある質問

### 4.1 品質スコアはどのように計算されますか？

品質スコアは以下の3つのカテゴリのスコアを統合して計算されます：

- **完全性**: データの欠損値の有無と影響
- **正確性**: データの値が物理的に妥当かどうか
- **一貫性**: データの時間的・空間的な一貫性

### 4.2 どのような問題が検出されますか？

以下の主な問題タイプが検出されます：

- **欠損値**: NULLまたはNaN値が含まれるフィールド
- **範囲外の値**: 妥当な範囲を超えた値（異常な速度など）
- **重複データ**: 重複するタイムスタンプなど
- **空間的異常**: 物理的に不可能な位置の変化
- **時間的異常**: 時間ギャップや時間逆行など

### 4.3 修正提案はどのように生成されますか？

システムは検出された問題の種類と特性に基づいて、最適な修正方法を提案します。例えば：

- **欠損値**: 線形補間、前方/後方充填など
- **範囲外の値**: クリッピング、平滑化など
- **重複データ**: 重複の調整または削除
- **空間的/時間的異常**: パターン検出に基づく修正

### 4.4 大きなデータセットでパフォーマンスが遅いときはどうすればよいですか？

大規模データセットの処理には時間がかかる場合があります。以下の方法で改善できます：

- データを時間/空間的に分割して分析する
- 必要なカラムのみをインポートする
- サンプリング率を調整する（開発者設定）

## 5. トラブルシューティング

### 5.1 エラーメッセージと対処法

- **「レポートデータの生成中にエラーが発生しました」**: データ形式を確認し、極端に異常なデータを前処理してください。
- **「修正の適用に失敗しました」**: 修正対象のデータが変更されていないか確認してください。
- **「データサイズが大きすぎます」**: サンプリングが自動的に適用されます。処理が完了するまで待ってください。

### 5.2 パフォーマンス問題

- **処理が遅い**: 大規模データセットの場合は、データのサブセットを選択して分析することを検討してください。
- **メモリ不足エラー**: 他のアプリケーションを閉じてメモリを解放するか、小さなデータセットで分析してください。

### 5.3 サポート情報

さらに詳しい情報や問題解決のサポートが必要な場合は、以下をご利用ください：

- アプリケーション内の「ヘルプ」セクション
- プロジェクトリポジトリのIssuesページ
- 開発チームへの問い合わせ