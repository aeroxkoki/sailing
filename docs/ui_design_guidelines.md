# セーリング戦略分析システム - UI/UXデザインガイドライン

## 1. ビジュアルスタイル

### 1.1 カラーパレット

#### ブランドカラー
- **プライマリ**: #1565C0（濃い青）
  - 用途: リンク、ボタン、強調ポイント
- **セカンダリ**: #00ACC1（ターコイズ）
  - 用途: アクセント、補助UI要素

#### アクセントカラー
- **アラートアクセント**: #E63946（赤）
  - 用途: 警告、エラー、注意喚起
- **セーリングイエロー**: #FFD700（金）
  - 用途: 特別機能、高優先度項目、ハイライト表示

#### 中性色
- **グレースケール**:
  - 白: #FFFFFF
  - グレー1: #F5F5F5
  - グレー2: #E0E0E0
  - 中間色: #9E9E9E
  - ダーク1: #616161
  - ダーク2: #212121

#### 状態色
- **成功**: #26A69A
- **警告**: #FFA726
- **エラー**: #EF5350
- **情報**: #2196F3

### 1.2 タイポグラフィ

#### フォントファミリー
システムフォントスタック（各OSネイティブフォント優先）:
```css
-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif
```

#### フォントサイズ
8ポイントグリッドベースのシステム化されたサイズ:
- **特大見出し**: 48px / 3rem（大見出し、ヒーロー）
- **大見出し**: 36px / 2.25rem（メインタイトル）
- **中見出し**: 30px / 1.875rem（セクションタイトル）
- **小見出し**: 24px / 1.5rem（サブセクション）
- **タイトル**: 20px / 1.25rem（カード、パネルタイトル）
- **サブタイトル**: 18px / 1.125rem（コンポーネント）
- **本文（大）**: 16px / 1rem（主要コンテンツ）
- **本文**: 14px / 0.875rem（標準コンテンツ）
- **小テキスト**: 12px / 0.75rem（注釈、メタデータ）

#### フォント太さ
- **標準**: 400（本文）
- **中太字**: 500（ナビゲーション、アクションテキスト）
- **太すぎ**: 600（強調）
- **太字**: 700（見出し、主要テキスト）

#### 行の高さ
- **見出し**: 1.2
- **本文**: 1.5
- **密集**: 1.6

### 1.3 スペーシングとレイアウト

#### 基本単位
8pxの基本単位ベース

#### スペーシングスケール
- **XS**: 4px（超小）
- **S**: 8px（要素内余白）
- **M**: 16px（標準）
- **L**: 24px（セクション）
- **XL**: 32px（大きめ）
- **XXL**: 48px（区切りセクション）
- **XXXL**: 64px（大空間）

#### サイズ
- **ボタン**:
  - 小: 16px
  - 中: 24px
  - 大: 32px
- **ボタン**:
  - 高さ: 36px（標）, 44px（大）
  - 余白: 左右16px, 上下8px
- **アイコンサイズ**:
  - 高さ: 40px

#### 角丸
- **小**: 4px（小UIパーツ、ボタン）
- **中**: 8px（カード、パネル）
- **大**: 16px（モーダル、大型コンポーネント）

### 1.4 シャドウ
- **シャドウ1**: `0 2px 4px rgba(0,0,0,0.1)`（カード、小UIコンポーネント）
- **シャドウ2**: `0 4px 8px rgba(0,0,0,0.15)`（フローティング、モーダル）
- **シャドウ3**: `0 8px 16px rgba(0,0,0,0.2)`（ドロップダウン、ポップオーバー）

## 2. コンポーネント

### 2.1 ボタン

#### プライマリボタン
- 背景: プライマリ (#1565C0)
- テキスト: 白 (#FFFFFF)
- ホバー: 濃青 (#0D47A1)
- 角丸: 4px
- 余白: 左右16px, 上下8px

#### セカンダリボタン
- 背景: 白 (#FFFFFF)
- 枠線: プライマリ (#1565C0)
- テキスト: プライマリ (#1565C0)
- ホバー: 薄い背景色 (#E3F2FD)

#### テキストボタン
- 背景: なし
- テキスト: プライマリ (#1565C0)
- ホバー: 薄い背景色 (#F5F5F5)

#### 警告ボタン
- 背景: エラー色 (#EF5350)
- テキスト: 白 (#FFFFFF)
- ホバー: 濃赤 (#C62828)

### 2.2 フォーム 

#### テキストフィールド
- 背景: 白 (#FFFFFF)
- 枠線: グレー (#E0E0E0)
- フォーカス: プライマリカラー (#1565C0)
- 余白: 左右12px, 上下8px
- 高さ: コンテンツに合わせる

#### セレクト
- ドロップダウン矢印と他のフォーム要素と統一
- プレースホルダーテキストは明るい灰色で表示

#### ラジオボタン・チェックボックス
- 選択色: プライマリ (#1565C0)
- サイズ: 16px x 16px

#### スライダー
- トラック: グレー (#E0E0E0)
- ツマミ: プライマリ (#1565C0)
- 幅: 100%

### 2.3 カードコンポーネント

#### 標準カード
- 背景: 白 (#FFFFFF)
- シャドウ: シャドウ1
- 角丸: 8px
- 余白: 16px
- サブセクションとコンテンツで構造化

#### 情報カード
- 情報サマリーを表示するためのコンパクトカード
- 強調: 情報色 (#2196F3)

#### アクション付きカード
- 操作ボタンを含む
- 余白: 12px
- フッターでアクションを分離

### 2.4 ナビゲーション

#### メインナビゲーション
- 背景: 白 (#FFFFFF)
- アクティブアイテム: グレー（プライマリ）
- 高さ: 64px
- メニュー項目: 一貫したスペーシング

#### サブナビゲーション
- 背景: 白 (#FFFFFF)
- メニュー項目間隔: 8px
- メニュー項目: セクション区切りとグループ化
- アクティブとテキスト間隔: 12px

#### タブ
- 背景: なし
- メニュー項目: 一貫したスペーシング
- テキスト: プライマリ (アクティブ), ダーク1 (非アクティブ)
- 余白: 左右16px, 上下12px

### 2.5 アラートとメッセージ

#### アラート
- 情報: 薄い背景色 (#E3F2FD), セクション区切り色 (#2196F3)
- 成功: 薄い背景色 (#E8F5E9), セクション区切り色 (#26A69A)
- 警告: 薄い背景色 (#FFF3E0), セクション区切り色 (#FFA726)
- エラー: 薄い背景色 (#FFEBEE), セクション区切り色 (#EF5350)
- 余白: 12px 16px
- 角丸: 8px

#### トースト（通知）
- 背景: ダーク2 (#212121)
- テキスト: 白 (#FFFFFF)
- 角丸: 4px
- シャドウ: シャドウ2
- 余白: 12px 16px
- 表示時間: 3秒

### 2.6 テーブルスタイル

#### ヘッダー
- 背景: グレー1 (#F5F5F5)
- 枠線: グレー2 (#E0E0E0)
- 行の高さ: 48px
- 偶数行背景: 白 (#FFFFFF)
- 奇数行背景: グレー1 (#F5F5F5)
- ホバー行: 薄い背景色 (#E3F2FD)

#### セル
- 枠線またはセパレータ: グレー2 (#E0E0E0)
- 余白: 12px 16px
- ホバー: グレー1 (#F5F5F5)

## 3. レスポンシブ

### 3.1 グリッドシステム

- 12カラムグリッド
- ガター幅: 16px
- 最大コンテナ幅: 1440px
- 本文最大幅: 800px（読みやすさ向上）

### 3.2 ブレークポイント定義

- **XS**: 320px以下（モバイル）
- **S**: 640px以下（大型モバイル）
- **M**: 768px以下（タブレット）
- **L**: 1024px以下（小型デスクトップ）
- **XL**: 1280px以下（大型デスクトップ）

### 3.3 コンテナ

- **フルード**: ウィンドウ幅に応じて伸縮
- **固定幅**: ブレークポイントに応じて最大幅
  - XS: 100%
  - S: 600px
  - M: 720px
  - L: 960px
  - XL: 1200px

### 3.4 レイアウトパターン

#### セクションレイアウト
- サイドナビゲーション（左）: 240px幅
- メインコンテンツ: 残り横幅
- コンテナ空間: 2-4カラム（可変）

#### ユーティリティレイアウト
- サイドナビゲーション（左）: 240px幅
- データコンテナ（中央）: 320px幅
- ビジュアライゼーション（右/メイン）: 残り横幅

## 4. ユーザーシナリオと情報アーキテクチャ

### 4.1 ユーザーシナリオとワークフロー分析

#### 主要ユーザーペルソナ

1. **プロフェッショナルセーラー**
   - 特徴: 高度な分析ニーズ、多量のデータを扱う、チームでの共有
   - 目標: パフォーマンス最適化、戦略分析、チーム内での情報共有
   - 主な使用環境: デスクトップ（分析時）、タブレット（現場確認時）

2. **アマチュアセーラー**
   - 特徴: 基本的な分析ニーズ、個人使用がメイン、UI操作の単純さを求める
   - 目標: 基本的なパフォーマンス向上、航路の記録
   - 主な使用環境: モバイルとデスクトップ

3. **セーリングコーチ**
   - 特徴: 複数の選手のデータを扱う、比較分析重視
   - 目標: 選手間の比較、改善ポイントの特定、指導材料の抽出
   - 主な使用環境: デスクトップとタブレット

#### 主要ユーザーシナリオ

1. **レース後の航跡分析**
   - ユーザーがGPSデータをアップロード
   - システムがデータを処理し、基本的な統計情報を表示
   - ユーザーが特定の分析モードを選択（風向分析、タック分析など）
   - システムが分析結果を視覚化
   - ユーザーが結果を保存または共有

2. **複数艇の比較分析**
   - 複数のGPSデータをアップロード
   - システムが共通の時間軸または地理軸でデータを整列
   - ユーザーが比較したい指標を選択
   - システムが比較結果を視覚化
   - ユーザーが差異や改善点を特定

3. **風の場の推定と戦略分析**
   - GPSと風向データをアップロード
   - システムが風の場を推定・可視化
   - ユーザーが特定のエリアまたは時間を選択
   - システムが戦略的要点を特定・表示
   - ユーザーが戦略の効果を評価

4. **パフォーマンス改善の特定**
   - 過去の複数セッションのデータをアップロード
   - システムが時系列で進捗状況を可視化
   - ユーザーが改善/悪化した領域を特定
   - システムが具体的な改善提案を生成

#### ユーザージャーニーマップ

**レース後分析のユーザージャーニー**

| ステージ | ユーザーアクション | 思考/感情 | タッチポイント | 機会/改善点 |
|---------|-----------------|----------|-------------|-----------|
| 発見     | ホーム画面を閲覧    | どこから始めるべきか | ナビゲーションバー | 初めてのユーザー向けガイド |
| 開始     | データアップロード  | うまく取り込めるか心配 | アップロードUI | 多様なデータ形式サポート、進捗表示 |
| 分析     | 分析タイプの選択    | 何が最も役立つか探索 | 分析メニュー | コンテキスト別おすすめ機能 |
| 洞察     | 結果の解釈        | これをどう活かせるか | 可視化UI | 明確なインサイトとアクション提案 |
| 保存/共有 | レポート生成      | これを他の人と共有したい | 共有ボタン | 多様な共有オプション、カスタムレポート |

### 4.2 情報アーキテクチャの設計

#### グローバルナビゲーション構造

**トップレベルナビゲーション**
- **マップビュー**: 空間的データ表示の中心ハブ
- **データ管理**: データの取り込み、管理、エクスポート
- **分析**: 様々な分析機能へのアクセス
- **設定**: システム設定やユーザー設定

**セカンドレベルナビゲーション（分析内）**
- 単艇分析
- 複数艇比較
- 風向分析
- 戦略分析
- パフォーマンスレポート

#### コンテンツ階層

1. **第1階層**:
   - ダッシュボード: 概要と最近のアクティビティ
   - マップビュー: GPSデータの視覚化
   - データ管理: インポート/エクスポート機能
   - 分析ハブ: 各種分析ツールへの入口

2. **第2階層**:
   - 詳細分析: 特定のデータセットの深堀り
   - 比較ビュー: 複数データの並列表示
   - パフォーマンスメトリクス: 詳細な統計情報
   - 設定・カスタマイズ: ユーザー設定

3. **第3階層**:
   - 特定分析結果: 詳細な分析情報
   - 設定詳細: 特定機能の詳細設定
   - ヘルプ・ドキュメント: 機能説明

#### ナビゲーション設計

**基本原則**
- 一貫した階層構造
- 現在位置の明示（パンくずリスト）
- 関連コンテンツへの明確なリンク
- ショートカットで頻繁に使用される機能へのアクセス

**主要ナビゲーションコンポーネント**
- サイドナビゲーション: 主要セクション間の移動
- タブナビゲーション: 関連コンテンツのグループ内移動
- パンくずリスト: 階層内の現在位置
- コンテキストメニュー: 状況に応じたアクション

#### 命名規則と用語体系

**一貫した専門用語**
- 「航跡」: GPSトラックデータ
- 「タック」: 方向転換
- 「VMG」: 風上/風下方向への有効速度
- 「風の場」: 空間的な風向風速の分布

**ユーザー理解のための用語選択**
- 初心者にも理解しやすい表現の優先
- 専門用語には常にツールチップで説明を付加
- 一貫した用語使用（同じ概念に複数の呼び名を避ける）

### 4.3 ページフローとワークフローパターン

#### コアワークフローパターン
1. データのインポート → 前処理 → 可視化 → 分析 → 結果の保存/共有
2. 過去データの検索 → 比較分析 → インサイト抽出 → アクション特定
3. 設定調整 → プレビュー → 適用 → 結果確認

#### ページ間遷移パターン
1. ホーム → データ管理 → マップビュー → 分析 → レポート
2. ホーム → 最近の分析 → 詳細ビュー → 新規比較
3. 分析ハブ → 特定分析 → 設定調整 → 結果表示

#### ユーザーフィードバックループ
1. アクション実行 → システム応答 → 結果表示 → 次のアクション提案
2. エラー発生 → 明確なエラーメッセージ → 解決策提案 → 再試行オプション
3. 長時間処理 → 進捗表示 → キャンセルオプション → 完了通知

## 5. アクセシビリティ

### 5.1 色のコントラスト

- テキスト/背景のコントラスト比: 最低4.5:1（WCAG AA準拠）
- 小テキスト: 最低4.5:1
- 大テキスト: 最低3:1

### 5.2 フォーカス状態のデザイン

- キーボードフォーカス状態は明示的に表示する
- フォーカス指示: 2px プライマリカラー (#1565C0)
- フォーカスの移動が論理的

### 5.3 スクリーンリーダー

- 画像には常にARIA属性と代替文字を設定
- フォームには適切なラベル
- 非表示の支援情報

## 6. アニメーションとトランジション

### 6.1 時間

- **瞬時**: 100ms（エフェクト、ボタン状態）
- **速い**: 200ms（フェードイン、小さなモーション）
- **標準**: 300ms（パネルの開閉、表示/非表示）
- **遅い**: 500ms（ページトランジション、大きなモーション変化）

### 6.2 イージング

- **標準**: イーズアウト (cubic-bezier(0, 0, 0.2, 1))
- **速い**: イーズイン (cubic-bezier(0.4, 0, 1, 1))
- **速い/遅い**: イーズインアウト (cubic-bezier(0.4, 0, 0.2, 1))

### 6.3 フィードバック

- **ボタンアクション**: 色変化、微小回転
- **リストの更新**: サブトルな背景色とシャドウの変化
- **読み込み**: スピナーやプログレスバーの適切な配置
- **ボタン押下**: プレス/リリースの視覚的なフィードバック

## 7. アイコノグラフィ

### 7.1 アイコンスタイル

- **スタイル**: 一貫したラインスタイル（アウトライン系）
- **サイズ**: 16px, 24px, 32px（用途に応じて）
- **線の太さ**: 1.5px（標準アイコン）
- **角丸**: 2px

### 7.2 標準アイコンセット

- Font Awesomeアイコンベース
- UI操作（ナビゲーション、編集など）
- データ指標アイコン（速度、風向など）

## 8. データビジュアライゼーション

### 8.1 チャートと色彩

#### グラフ色彩
- **第1シリーズ**: プライマリ (#1565C0)
- **カラーシーケンス**: 論理的な順序で
  1. #1565C0（プライマリ）
  2. #26A69A（緑青）
  3. #FFA726（オレンジ）
  4. #5C6BC0（青紫）
  5. #66BB6A（緑）
  6. #EF5350（赤）
  7. #7E57C2（紫）
  8. #FFEE58（黄色）

#### グリッドシステム
- **グリッド線**: グレー2 (#E0E0E0), 細線
- **軸**: ダーク1 (#616161)
- **ラベル**: ダーク2 (#212121)
- **凡例ボックス**: 白背景、シャドウ2効果
- **軸ラベル**: 明瞭な間隔と大きさ

### 8.2 マップ表示

- **ベースマップ**: 中間調の地図スタイル
- **トラックライン**: メインカラーで強調表示
- **マーカー**: シンプルな白背景、シャドウ1効果
- **ポップアップ**: セカンダリカラー、視認性向上

## 9. モバイル最適化

### 9.1 モバイルファーストのアプローチ

- 基本レイアウトはモバイルから設計
- 大型ディスプレイでは横幅を活用
- 操作エリアは最低44px×44px

### 9.2 タッチターゲットの最適化

- モバイル操作時の十分なターゲットサイズ
- 小さな要素は適切なパディングを加える
- タップ領域と視覚的要素の一致

### 9.3 ナビゲーション変更

- デスクトップ: メインナビゲーション
- タブレット: 折りたたまれたナビゲーション
- モバイル: ボトムナビゲーションバーで主要機能へのアクセス提供

## 10. 設計方法論と実装方針

### 10.1 アトミックデザイン原則

本システムでは、コンポーネント設計にアトミックデザイン原則を採用します。これにより、一貫性があり再利用可能なコンポーネントシステムを構築します。

#### 階層構造
1. **原子 (Atoms)**: 
   - ボタン、入力フィールド、ラベルなどの最小単位
   - 単一の機能を持ち、他のコンポーネントから独立している
   - 例: Button、Input、Icon、Label

2. **分子 (Molecules)**:
   - 複数の原子を組み合わせた機能的コンポーネント
   - より複雑な機能を持ち、特定のタスクを実行する
   - 例: FormField（Label + Input）、SearchBar（Input + Button）

3. **有機体 (Organisms)**:
   - 分子と原子を組み合わせた複合コンポーネント
   - インターフェースの明確な領域を形成する
   - 例: NavigationBar、DataTable、FilterPanel

4. **テンプレート (Templates)**:
   - 有機体を配置するレイアウト構造
   - 具体的なコンテンツなしの骨組み
   - 例: DashboardLayout、TwoColumnLayout

5. **ページ (Pages)**:
   - テンプレートに具体的なコンテンツを配置したもの
   - 実際のユーザーが使用する画面
   - 例: MapViewPage、DataAnalysisPage

#### 設計プロセス
1. 必要なUIコンポーネントの種類を特定
2. 最小単位（原子）から設計を開始
3. ボトムアップアプローチで徐々に複雑なコンポーネントを構築
4. コンポーネント間の関係性とデータフローを定義

### 10.2 コンポーネントAPI設計

#### 一貫したAPI設計原則
- **明確な命名規則**: 
  - プロパティ名は具体的で明示的に（例: `onClick` ではなく `onButtonClick`）
  - ブール値は `is`、`has`、`should` などのプレフィックスを使用（例: `isDisabled`）

- **デフォルト値の設定**:
  - すべてのオプションプロパティには適切なデフォルト値を設定
  - デフォルト値はもっとも一般的なユースケースに対応

- **適切なプロパティタイプ**:
  - プロパティごとに明確な型定義（docstringまたはタイプヒント）
  - 複雑なデータ構造には具体的な形式を明示

- **一貫した動作パターン**:
  - 同様のコンポーネントは同様の方法で動作する
  - インタラクションパターンは一貫している

#### バリエーションの設計
- **サイズバリエーション**: small, medium, large
- **スタイルバリエーション**: primary, secondary, text, outlined
- **状態バリエーション**: default, hover, active, disabled

### 10.3 CSSクラス命名規則

- BEMメソドロジー採用:
  - Block: `.card`
  - Element: `.card__title`
  - Modifier: `.card--highlighted`

### 10.4 コンポーネント構造 

```
components/
    common/
       Button.jsx
       Card.jsx
       ...
    navigation/
       Sidebar.jsx
       Tabs.jsx
       ...
    forms/
       Input.jsx
       Select.jsx
       ...
    visualizations/
      Chart.jsx
      Map.jsx
      ...
```

### 10.5 状態管理アプローチ

#### コンポーネント内状態管理
- シンプルな状態はコンポーネント内で管理
- コンポーネントの責任範囲を明確に定義
- 状態更新のデータフローは単方向に保つ

#### グローバル状態管理
- 複数コンポーネント間で共有される状態はグローバルに管理
- 状態管理にはReact Context APIを使用
- 状態の更新はアクション経由で行い、予測可能性を確保

#### ステートレスコンポーネント
- 可能な限りステートレスコンポーネントを優先
- プレゼンテーショナルコンポーネントとコンテナコンポーネントを分離

### 10.6 コンポーネント間通信

#### 親子通信パターン
- Props Down: 親から子へのデータ渡し
- Events Up: 子から親へのイベント通知

#### 兄弟コンポーネント間通信
- 共通の親を介して通信
- 必要に応じてContextを使用

#### コンポーネント合成パターン
- 子コンポーネントの制御を親コンポーネントに委任
- `children` プロパティを活用した柔軟な構成

### 10.7 コード品質基準

- コンポーネントにはPropTypesと適切なドキュメンテーション
- 再利用性重視
- パフォーマンスの考慮要件
- 単一責任の原則に従うコンポーネント設計

## 11. ユーザーフィードバック考慮事項

### 11.1 デスクトップ対応

- キーボード操作
- マウス操作によるフロー
- ツールチップヘルプ
- カラーモード変更

### 11.2 モバイル対応

- タッチジェスチャー
- スクロールナビゲーション
- フォントサイズによるレスポンシブ調整
- オフライン対応の考慮

### 11.3 タブレット対応

- ハイブリッドインタラクション（タッチとマウス）
- 画面比率に応じたレイアウト
- 中間サイズの表示/非表示

## 12. パフォーマンスと最適化方針

### 12.1 ローディング戦略

- スケルトンスクリーン
- プログレッシブ読み込み
- 必要に応じた遅延読み込みコンポーネント

### 12.2 アセット最適化

- 画像の最適化
- ベクトル画像の活用
- スプライト画像の使用

### 12.3 データ処理方式

- クライアント側処理最小化
- ページネーション処理
- 仮想スクロール方式

### 12.4 互換性管理

- ブラウザ/デバイス/画面サイズ
- フォールバックデザイン
- カラーモード対応
